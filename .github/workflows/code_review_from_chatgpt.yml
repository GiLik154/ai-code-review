name: Code Review

permissions:
  contents: read
  pull-requests: write

on:
  pull_request:
    types: [opened, reopened, synchronize]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: anc95/ChatGPT-CodeReview@main
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          OPENAI_API_KEY: ${{ secrets.OPENAPI_SECRET_KEY }}
          LANGUAGE: Korean
          OPENAI_API_ENDPOINT: https://api.openai.com/v1
          MODEL: gpt-4o
          PROMPT:
              리뷰는 반드시 **현재 제공된 코드 범위 내에서만** 해 주세요.
            - 구현되지 않은 동작이나 추측성 설명(예 = 이 인터페이스는 ~일 것 같다, ~해야 할 것 같다, 구체적인 로직 파악은 어렵다 등)은 하지 말아 주세요.
            - 코드에 **직접 명시된 기능, 로직, 설계만** 리뷰해 주세요.
            - 테스트 코드가 없으면 "없다"고만 언급하고, 어떻게 구현되어야 한다는 **추측성 피드백은 생략해 주세요.**
            
            중점 리뷰 대상
              - 코드가 의미상, 설계상 문제는 없는지
              - 명확하고 일관된 책임을 갖고 있는지
              - 의도된 동작을 코드 상에서 정확하게 수행하는지
            
            다음은 리뷰하지 않아도 됩니다
              - 코드 스타일, 네이밍, 주석 등 팀마다 다른 요소
              - 파일 끝 newline 여부 등 포맷팅
          top_p: 1
          temperature: 0.7
          max_tokens: 1500
          MAX_PATCH_LENGTH: 5000
          IGNORE_PATTERNS: /node_modules/**/*,*.md,*.log,*.txt 
